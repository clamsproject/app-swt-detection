# Stitching in SWT


Individual still frames (timeponts) are all assocciated with predictions that have scores for each label (here we have slate, chyron, credits and NEG):

```
<Prediction  69000 0.0069 0.0111 0.0434 0.9387>
<Prediction  70000 0.0010 0.0013 0.1231 0.8746>
<Prediction  71000 0.0529 0.0004 0.4644 0.4822>
<Prediction  72000 0.0017 0.0059 0.4455 0.5469>
<Prediction  73000 0.0001 0.0010 0.0003 0.9987>
```

These predictions are generated by the `modeling.classify` module. They are stitched together in the `modeling.sticher` module as follows.

**Collect all potential TimeFrames**. Find sequences of frames for all labels where the score of each frame is at least the mininum value as defined in the configuration. We only get TimeFrames for the non-negative lables. The sequences can be overlapping, for example, if the minimum value is 0.001 (much lower than the actual value used) we can get the following TimeFrames with the input above:

```
<TimeFrame 69000:72000 0.0156 slate>
<TimeFrame 69000:70000 0.0062 chyron>
<TimeFrame 69000:72000 0.2691 credits>
<TimeFrame 72000:73000 0.0035 chyron>
```

The floating number is the TimeFrame score, which is an average of all prediction scores in the sequence.

**Filtering TimeFrames**. This uses a minimum average score and a minimum length. Let's say we use 0.01 and 2 (the first is much lower than the default value we use, but used for explanatory purposes). We the get:

```
<TimeFrame 69000:72000 0.0156 slate>
<TimeFrame 69000:72000 0.2691 credits>
```

**Eliminate verlapping TimeFrames**. All TimeFrames are sorted on average scores and put in the result set one by one. A TimeFrame is not added to the result set if one of its timepoints was already in cluded in a TimeFrame in the result set. The final set is:

```
<TimeFrame 69000:72000 0.0156 slate>
<TimeFrame 69000:72000 0.2691 credits>
```
